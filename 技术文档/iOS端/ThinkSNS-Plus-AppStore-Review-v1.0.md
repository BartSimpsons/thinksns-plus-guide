# ThinkSNS Plus iOS 端上架必读 v1.0

<font color = red > 注：当前版本文档基于 `ThinkSNS Plus 2.1` 版本   ---2018.11.19 ，请务必认真阅读！！！ </font>


## 目录

- [服务器配置](#一服务器配置)
	- 注册协议
	- 关于我们内容
	- 积分规则
	- APP 版本控制 
- [APP配置](#二app配置)
- [功能点检查](#三功能点检查)
	- 登录功能
	- 注册功能
	- 积分
	- 钱包
	- 动态发布
- [内容检查](#四内容检查)
	- 内容要求
	- 测试账号
- [其他补充说明](#五其他补充说明)
	- 关于IAP充值说明
	- 被拒




-----



## 一、服务器配置  


#### 注册协议

管理后台：用户中心 -- 注册设置 -- 开启 “服务条款和隐私政策” ，协议内容可以参考附件 [服务条款及隐私政策](./ThinkSNS服务条款及隐私政策.md)
  
#### 关于我们内容

管理后台: 系统设置 -- 关于我们 -- 可以直接填写网址，也可以通过 md 编辑，优先识别网页地址。

#### 积分规则

管理后台：积分设置 -- 配置 --  可填写相关规则说明信息
 
#### APP 版本控制 

1. iOS 当前版本 务必比 App Store 审核中的版本更低，确保在审核过程中不会出现版本更新弹窗。版本检测是 APP Store 禁止的行为，所以一定要注意。  

	示范：比如线上运营版本 Version：1.0 build：10， 提交审核的版本 Version 1.1 build 1，那么后台配置的版本 Version 因为为1.0 build不高于10，否则线上运营的版本会有新版本提示，但实际上并没有新版本审核通过。审核通过后更新设置为 Version 1.1 build 1 即可。  
	


> 备注：
> 
> 1. iOS 端 APP 的下载地址可以填写 APP 上架通过后的地址（可以通过APP Store -- 进入具体APP详情页 -- 分享APP -- 信息 复制短信框中的链接即可），也可以是 APP 的在线安装 H5 页面。
> 2. 审核期间确保服务器正常运行 
> 
> 

## 二、APP配置

1. 三方分享、环信、高德地图 key 配置正确可用 
2. info.plist 中 APP 对应的 URL Schemes  正确可用
3. 如果需要使用 IAP 充值，确保iTunes connect 配置至少三个 IAP 积分购买项目，比如 70 积分、300 积分、600 积分，并在后台 IAP 配置中填写好。并在 iTunes connect 新建沙盒测试 APPleID 进行购买测试。（如果采用关闭积分充值的方案可以不配置IAP）

## 三、功能点检查

确保一下功能正常可用

#### 1.登录功能

1. 帐号登录
2. 短信登录
3. 三方登录  


#### 2. 注册功能

1. 确保短信验证码可以接收
2. 三方登录后选择新注册新帐号可用

####  3. 积分  

##### 3.1 积分充值

 提供以下两种方案：
 
1. 仅 IAP 充值方案
	
	须 [配置](#二app配置)正确，上架完成后可以根据客户需求是否关闭 IAP 积分充值，采用支付宝、微信充值。 审核期间确保同后台开启 IAP 充值，APP 页面表现为 “我的-我的积分-积分充值” 进入到 IAP 充值页面  
	
2. 关闭积分系统

	审核期间确保同后台关闭积分充值，APP 页面表现为 “我的--我的积分” 没有充值入口。  
   > 需要在审核备注中添加：该应用的积分可以通过发布动态获得，可以用于优质内容的奖励消耗 
 
##### 3.2 积分提现

 审核期间需要在后台配置：关闭积分提现，APP 页面表现为 “我的-我的积分” 没有提现入口。审核通过后可以根据运营需要进行开启   
 
#### 4. 钱包

上架期间必须保持后台钱包开关关闭，APP 页面表现为 “我的” 没有钱包入口  
> 注意：如果不符合，排查后台是否配置正确；如果配置正确但 APP 显示不对，尝试重启 APP；如果依旧不对，就排除 APP 的 bug 原因。  
> 

#### 5. 动态发布

确保动态发布图文、视频功能正常使用。
 
## 四、内容检查

#### 内容要求: APP 在提交审核之前需要每一个大板块中都有内容

1. 内容要与 APP 运营内容相符合，并且符合国家相关政策指导。  
2. 不能出现购买或者付费服务或者 VIP 宣传。  
3. 不能宣传 APP 在除苹果平台使用，如宣传安卓版本的 APP。可以出现 “来自 H5” 或者 “来自安卓” 的动态。  
4. 确保每一个板块都有内容，让 APP 看起来就是已经在运营而不是测试版本。不要出现“测试”、“内测”等关键字。  
5. 以上内容可以在 App Store 上架成功后清理  

#### 用户要求

1. APP 提交审核前，须添加至少 5 名用户参与社区互动，丰富内容。  

#### 测试账号

1. 提供的测试账号的用户信息要确保正式且内容积极 

## 五、其他补充说明  

#### 关于IAP充值说明  

1. 应用内的虚拟商品购买苹果只允许 IAP（in-App Purchase）这一种充值方式。  
该充值方式目前国内用户的接收度已经和支付宝、微信相差不多，但是会收取每笔支付 30% 左右的费用，以及不能提现的限制条件导致和客户的业务有所冲突，希望使用传统的支付宝微信支付。  
2. 不适用 IAP 支付的风险说明，在项目体量不大的情况下，使用 “IAP 参与 APP 上架审核，且审核通过后通过后台打开支付宝微信支付” 的避审方案是可行的。但是如果遭到用户举报（举报的时效性不高）或者被 Apple 抽查（极其小概率事件），就会被苹果下架整顿。  
3. IAP 充值所需要的 30% 的税费由客户承担，所以 IAP 充值 100 积分所看到的面值为 70 积分，实际到账也是 70 积分。  

#### 被拒 

1. 应用上架审核被拒绝之后一定要认真分析和调整，如果应为同一个问题被反复驳回会受到苹果延时审核的处罚。  
第一次提交审核是最容易通过的，务必珍惜。

#### 其他

* [APP Store上架指导](./APPStore上架指导.md)
